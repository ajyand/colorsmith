module.exports=function(){function r(r){return r>=1?255:Math.floor(256*r)}function n(r,n,c){return[r[0]*(1-c)+n[0]*c,r[1]*(1-c)+n[1]*c,r[2]*(1-c)+n[2]*c]}function c(r,n){return Math.abs(r-n)<1e-6?!0:!1}function t(r){var n=0,c=0;return r[0]<r[1]?r[0]<r[2]?(n=r[0],c=0):(n=r[2],c=2):r[1]<r[2]?(n=r[1],c=1):(n=r[2],c=2),[c,n]}function u(r){var n=0,c=0;return r[0]>r[1]?r[0]>r[2]?(n=r[0],c=0):(n=r[2],c=2):r[1]>r[2]?(n=r[1],c=1):(n=r[2],c=2),[c,n]}var o={},e=function(r){return r>15?r.toString(16):"0"+r.toString(16)};return o.rgb2hex=function(r){return"#"+e(r[0])+e(r[1])+e(r[2])},o.hex2rgb=function(r){return[parseInt(r.substr(1,2),16)/255,parseInt(r.substr(3,2),16)/255,parseInt(r.substr(5,2),16)/255]},o.ccc2rgb=function(r){var c=[];return 3*r[1]<1?c=r[0]<1/3?n([3*r[1],0,0],[0,3*r[1],0],3*r[0]):r[0]<2/3?n([0,3*r[1],0],[0,0,3*r[1]],3*r[0]-1):n([0,0,3*r[1]],[3*r[1],0,0],3*r[0]-2):3*r[1]<2?(r[0]+=(3*r[1]-1)/6,r[0]>1&&(r[0]-=1),c=r[0]<r[1]-1/3?n([1,0,3*r[1]-1],[1,3*r[1]-1,0],3*r[0]/(3*r[1]-1)):r[0]<1/3?n([1,3*r[1]-1,0],[3*r[1]-1,1,0],(3*r[0]-3*r[1]+1)/(2-3*r[1])):r[0]<r[1]?n([3*r[1]-1,1,0],[0,1,3*r[1]-1],(3*r[0]-1)/(3*r[1]-1)):r[0]<2/3?n([0,1,3*r[1]-1],[0,3*r[1]-1,1],3*(r[0]-r[1])/(2-3*r[1])):r[0]<r[1]+1/3?n([0,3*r[1]-1,1],[3*r[1]-1,0,1],(3*r[0]-2)/(3*r[1]-1)):n([3*r[1]-1,0,1],[1,0,3*r[1]-1],(3*r[0]-3*r[1]-1)/(2-3*r[1]))):(r[0]+=1/6,r[0]>1&&(r[0]-=1),c=r[0]<1/3?n([1,3*r[1]-2,1],[1,1,3*r[1]-2],3*r[0]):r[0]<2/3?n([1,1,3*r[1]-2],[3*r[1]-2,1,1],3*r[0]-1):n([3*r[1]-2,1,1],[1,3*r[1]-2,1],3*r[0]-2)),c=n([r[1],r[1],r[1]],c,r[2])},o.rgb2ccc=function(r){var n=0,o=0,e=0;if(o=(r[0]+r[1]+r[2])/3,c(r[0],r[1])&&c(r[1],r[2]))return[0,o,0];var f=[],i=[];return 1>3*o?(f=t(r),e=1-f[1]/o,n=0==f[0]?(r[2]-r[0])/(o-r[0])/9+1/3:1==f[0]?(r[0]-r[1])/(o-r[1])/9+2/3:(r[1]-r[2])/(o-r[2])/9):2>3*o?(f=t(r),i=u(r),f[1]*(1-o)<(1-i[1])*o?(e=1-f[1]/o,n=0==f[0]?(o+1)/2-o*(r[1]-r[0])/(o-r[0])/3:1==f[0]?(3*o+5)/6-o*(r[2]-r[1])/(o-r[1])/3:(3*o+1)/6-o*(r[0]-r[2])/(o-r[2])/3):(f=i,e=(f[1]-o)/(1-o),n=0==f[0]?(r[1]*(1-o)-o*(1-r[0]))/(r[0]-o)/3+(1-3*o)/6:1==f[0]?(r[2]*(1-o)-o*(1-r[1]))/(r[1]-o)/3+(1-o)/2:(r[0]*(1-o)-o*(1-r[2]))/(r[2]-o)/3+(5-3*o)/6)):(f=u(r),e=(f[1]-o)/(1-o),n=0==f[0]?(r[0]-r[2])/(r[0]-o)/9-1/6:1==f[0]?(r[1]-r[0])/(r[1]-o)/9+1/6:(r[2]-r[1])/(r[2]-o)/9+.5),0>n&&(n+=1),[n,o,e]},o.toSurfaceComplexion=function(r,n){r*=6;var c=(1+r-Math.floor(r))/3;return Math.floor(r)%2&&(c=1-c),.5>n?2*n*c:1-2*(1-n)*(1-c)},o.fromSurfaceComplexion=function(r,n){r*=6;var c=(1+r-Math.floor(r))/3;return Math.floor(r)%2&&(c=1-c),c>n?n/2/c:1-(1-n)/2/(1-c)},o.ccc2hex=function(n){var c=o.ccc2rgb(n);return c[0]=r(c[0]),c[1]=r(c[1]),c[2]=r(c[2]),o.rgb2hex(c)},o.surfCcc2rgb=function(r){return o.ccc2rgb([r[0],o.toSurfaceComplexion(r[0],r[1]),r[2]])},o.rgb2surfCcc=function(r){var n=o.rgb2ccc(r);return n[1]=o.fromSurfaceComplexion(n[0],n[1]),n},o.surfCcc2hex=function(n){var c=o.surfCcc2rgb(n);return c[0]=r(c[0]),c[1]=r(c[1]),c[2]=r(c[2]),o.rgb2hex(c)},o.hex2ccc=function(r){return o.rgb2ccc(o.hex2rgb(r))},o.hex2surfCcc=function(r){return o.rgb2surfCcc(o.hex2rgb(r))},o}();